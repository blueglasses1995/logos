[
  {
    "id": "ch17-t1",
    "type": "multiple-choice",
    "question": "再帰的定義を構成する2つの要素は何ですか？",
    "options": [
      "基底ケースと帰納ステップ（再帰ステップ）",
      "入力と出力",
      "前条件と後条件",
      "変数と定数"
    ],
    "correctIndex": 0,
    "explanation": "再帰的定義は、最小の入力に対する値を直接定義する「基底ケース」と、より小さい入力の値を用いて定義する「帰納ステップ（再帰ステップ）」の2つで構成されます。帰納法と同じ構造です。"
  },
  {
    "id": "ch17-t2",
    "type": "multiple-choice",
    "question": "部分正当性と全正当性の違いは何ですか？",
    "options": [
      "部分正当性は停止を仮定するが、全正当性は停止も証明する",
      "部分正当性は入力の一部にしか成り立たない",
      "全正当性は近似的な正しさのことである",
      "部分正当性と全正当性は同じ概念の別名である"
    ],
    "correctIndex": 0,
    "explanation": "部分正当性は「プログラムが停止したならば結果が正しい」という主張であり、停止性は仮定します。全正当性は「プログラムが必ず停止し、結果が正しい」という、より強い主張です。全正当性 = 部分正当性 + 停止性です。"
  },
  {
    "id": "ch17-t3",
    "type": "multiple-choice",
    "question": "整礎関係（well-founded relation）の特徴として正しいものはどれですか？",
    "options": [
      "無限降下列が存在しない",
      "すべての要素が比較可能である",
      "反射的かつ推移的である",
      "最大元が存在する"
    ],
    "correctIndex": 0,
    "explanation": "整礎関係は「無限降下列が存在しない」関係です。同値な条件として「空でない任意の部分集合が最小元を持つ」があります。自然数上の < は整礎関係の典型例です。"
  },
  {
    "id": "ch17-t4",
    "type": "multiple-choice",
    "question": "ループ不変条件が帰納法に対応するとき、「ループ本体で不変条件が保存される」ことはどの部分に対応しますか？",
    "options": [
      "帰納ステップ",
      "基底ケース",
      "帰納仮定",
      "結論"
    ],
    "correctIndex": 0,
    "explanation": "ループ不変条件の「保存」はまさに帰納ステップに対応します。ループ開始前の不変条件成立が「基底ケース」、各反復での保存が「帰納ステップ」、ループ終了時の結論が「帰納法の結論」に対応します。"
  },
  {
    "id": "ch17-t5",
    "type": "gap-fill-proof",
    "steps": [
      { "id": "s1", "content": "定理: ユークリッドの互除法 gcd(a, b) は必ず停止する", "type": "given" },
      { "id": "s2", "content": "基底ケース: b = 0 のとき gcd(a, 0) = a で即座に停止 ✓", "type": "given" },
      { "id": "s3", "content": "帰納ステップ: b > 0 のとき gcd(a, b) = gcd(b, a mod b)", "type": "given" },
      { "id": "s4", "content": "a mod b < b なので、第2引数は ___", "type": "gap", "correctValue": "各再帰呼び出しで厳密に減少する", "options": ["各再帰呼び出しで厳密に減少する", "各再帰呼び出しで増加する", "変化しない", "偶数回の呼び出しで減少する"] },
      { "id": "s5", "content": "自然数上の < は整礎関係なので、有限回で b = 0 に到達して停止する ✓", "type": "derived", "rule": "整礎関係の性質" }
    ],
    "explanation": "gcd(a, b) の再帰呼び出し gcd(b, a mod b) で、第2引数は b から a mod b に変わります。a mod b < b が常に成り立つため第2引数は厳密に減少し、自然数上の < は整礎関係なので有限回で 0 に到達します。"
  }
]
