[
  {
    "id": "ch13-t1",
    "type": "multiple-choice",
    "question": "f: A → B が関数であるための条件はどれですか？",
    "options": [
      "すべての a ∈ A に対して f(a) = b となる b ∈ B がちょうど1つ存在する",
      "すべての b ∈ B に対して f(a) = b となる a ∈ A が存在する",
      "f は A × B の任意の部分集合である",
      "A と B が同じ集合である"
    ],
    "correctIndex": 0,
    "explanation": "関数の本質は「各入力に対して出力が一意に定まる」ことです。入力に対応がないことや、1つの入力に複数の出力があることは許されません。"
  },
  {
    "id": "ch13-t2",
    "type": "multiple-choice",
    "question": "f: ℝ → ℝ, f(x) = x² について正しいのはどれですか？",
    "options": [
      "単射でも全射でもない",
      "単射だが全射ではない",
      "全射だが単射ではない",
      "全単射"
    ],
    "correctIndex": 0,
    "explanation": "f(2) = f(-2) = 4 なので単射ではありません。また f(x) = -1 となる実数 x は存在しないので全射でもありません。"
  },
  {
    "id": "ch13-t3",
    "type": "multiple-choice",
    "question": "合成関数 (g ∘ f)(x) の定義はどれですか？",
    "options": [
      "g(f(x)): まず f を適用し、その結果に g を適用する",
      "f(g(x)): まず g を適用し、その結果に f を適用する",
      "f(x) + g(x): f と g の出力を足す",
      "f(x) · g(x): f と g の出力を掛ける"
    ],
    "correctIndex": 0,
    "explanation": "g ∘ f は「まず f を適用し、次に g を適用する」という合成です。表記の順序（g が先に書かれる）と適用の順序（f が先に適用される）が逆なので注意が必要です。"
  },
  {
    "id": "ch13-t4",
    "type": "multiple-choice",
    "question": "逆関数 f⁻¹ が存在するための条件はどれですか？",
    "options": [
      "f が全単射であること",
      "f が単射であること（全射でなくてもよい）",
      "f が全射であること（単射でなくてもよい）",
      "f が連続であること"
    ],
    "correctIndex": 0,
    "explanation": "逆関数は f の入出力を逆転させたものです。単射でないと逆写像が一意に定まらず、全射でないと逆関数の定義域が終域全体をカバーしません。よって全単射が必要です。"
  },
  {
    "id": "ch13-t5",
    "type": "proof-builder",
    "conclusion": "g ∘ f は単射",
    "availablePremises": [
      { "id": "p1", "label": "f: A → B は単射", "rule": "前提" },
      { "id": "p2", "label": "g: B → C は単射", "rule": "前提" },
      { "id": "p3", "label": "(g ∘ f)(a₁) = (g ∘ f)(a₂) と仮定する", "rule": "仮定" },
      { "id": "p4", "label": "g(f(a₁)) = g(f(a₂))", "rule": "合成の定義より" },
      { "id": "p5", "label": "f(a₁) = f(a₂)（g の単射性より）", "rule": "g が単射" },
      { "id": "p6", "label": "a₁ = a₂（f の単射性より）", "rule": "f が単射" }
    ],
    "correctOrder": ["p1", "p2", "p3", "p4", "p5", "p6"],
    "explanation": "単射の合成が単射であることの証明: (g∘f)(a₁) = (g∘f)(a₂) から始め、合成の定義で展開し、g の単射性で f(a₁) = f(a₂) を導き、f の単射性で a₁ = a₂ を結論します。"
  }
]
