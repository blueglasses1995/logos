[
  {
    "id": "ch14-p1",
    "type": "multiple-choice",
    "question": "チューリングの停止問題「すべてのプログラムについて停止するかを判定するプログラムは存在しない」の証明で使われる手法は何ですか？",
    "options": [
      "対角線論法（停止判定器の存在を仮定し、自己参照的なプログラムで矛盾を導く）",
      "数学的帰納法",
      "鳩の巣原理",
      "構成的証明"
    ],
    "correctIndex": 0,
    "explanation": "停止問題の証明はカントールの対角線論法と同じ構造です。停止判定器 H が存在すると仮定し、H を使って自分自身を入力にしたプログラム D を構成すると、D が停止する ⟺ D が停止しない という矛盾が生じます。"
  },
  {
    "id": "ch14-p2",
    "type": "multiple-choice",
    "question": "データ圧縮において「すべてのファイルを短くできる圧縮アルゴリズム」が存在しない理由を、集合論的に説明するとどうなりますか？",
    "options": [
      "n ビット以下の文字列の数は有限（2ⁿ⁺¹ - 1）であり、n+1 ビット以上の文字列をすべて n ビット以下に写す単射は存在しない",
      "圧縮は全単射でなければならないから",
      "無限のデータは圧縮できないから",
      "鳩の巣原理は有限集合にしか適用できないから"
    ],
    "correctIndex": 0,
    "explanation": "鳩の巣原理により、長い文字列の数が短い文字列の数を超えるため、すべてを短くする単射は存在しません。これは |A| > |B| のとき A から B への単射がないことの直接的な応用です。"
  },
  {
    "id": "ch14-p3",
    "type": "multiple-choice",
    "question": "ヒルベルトの無限ホテルで、可算無限台のバスがそれぞれ可算無限人の乗客を乗せて到着しました。全員を宿泊させることはできますか？",
    "options": [
      "できる（ℵ₀ × ℵ₀ = ℵ₀ なので可算無限の客を可算無限の部屋に入れられる）",
      "できない（無限の無限倍は非可算になる）",
      "できるが、いくつかの部屋が空くことは避けられない",
      "部屋が足りないので増築が必要"
    ],
    "correctIndex": 0,
    "explanation": "可算無限の可算無限倍は依然として可算無限です（ℵ₀ × ℵ₀ = ℵ₀）。素数のべき乗を利用した部屋割りなど、様々な方法で全員を宿泊させることができます。"
  },
  {
    "id": "ch14-p4",
    "type": "gap-fill-proof",
    "steps": [
      { "id": "s1", "content": "f: ℕ → ℤ を f(n) = n/2（n が偶数）, f(n) = -(n+1)/2（n が奇数）と定義", "type": "given" },
      { "id": "s2", "content": "f(0)=0, f(1)=-1, f(2)=1, f(3)=-2, f(4)=2, ...", "type": "derived", "rule": "代入" },
      { "id": "s3", "content": "___", "type": "gap", "correctValue": "f は単射: f(m) = f(n) ならば m = n", "options": ["f は単射: f(m) = f(n) ならば m = n", "f は全射だが単射ではない", "f は定義域が有限", "f は合成関数である"] },
      { "id": "s4", "content": "f は全射: 任意の z ∈ ℤ に対して、z ≥ 0 なら f(2z) = z、z < 0 なら f(-2z-1) = z", "type": "derived", "rule": "全射の確認" },
      { "id": "s5", "content": "f は全単射なので |ℕ| = |ℤ|", "type": "derived", "rule": "濃度の定義" }
    ],
    "explanation": "自然数と整数の間に全単射を構成することで、両者が同じ濃度（ℵ₀）を持つことを証明します。偶数を非負整数に、奇数を負整数に対応させます。"
  },
  {
    "id": "ch14-p5",
    "type": "gap-fill-proof",
    "steps": [
      { "id": "s1", "content": "A から P(A) への全単射 f が存在すると仮定する", "type": "given" },
      { "id": "s2", "content": "D = {a ∈ A | a ∉ f(a)} を定義する（対角線集合）", "type": "derived", "rule": "対角線的構成" },
      { "id": "s3", "content": "D ∈ P(A) なので、∃d ∈ A: f(d) = D", "type": "derived", "rule": "f の全射性" },
      { "id": "s4", "content": "___", "type": "gap", "correctValue": "d ∈ D ⟺ d ∉ f(d) = D（矛盾）", "options": ["d ∈ D ⟺ d ∉ f(d) = D（矛盾）", "d ∈ D ならば d ∈ f(d)", "D は空集合である", "f(d) ≠ D"] },
      { "id": "s5", "content": "矛盾が生じたため、全単射 f は存在しない。よって |P(A)| > |A|", "type": "derived", "rule": "背理法の完成" }
    ],
    "explanation": "べき集合定理の証明: 対角線集合 D の定義により d ∈ D ⟺ d ∉ f(d) ですが、f(d) = D とすると d ∈ D ⟺ d ∉ D となり矛盾します。"
  }
]
