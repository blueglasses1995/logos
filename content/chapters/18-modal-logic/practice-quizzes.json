[
  {
    "id": "ch18-p1",
    "type": "multiple-choice",
    "question": "ソフトウェア仕様書に「このシステムはデッドロックしてはならない」と書かれています。これを様相論理で形式化すると？",
    "options": [
      "□¬D（Dは「デッドロックが発生する」）",
      "¬◇D（Dは「デッドロックが発生する」）",
      "□¬Dと¬◇Dはどちらも正しく、両者は同値",
      "◇¬D（Dは「デッドロックが発生する」）"
    ],
    "correctIndex": 2,
    "explanation": "「してはならない」は「いかなる状況でもDが起こらない」= □¬D です。□¬D ⟺ ¬◇D（双対性）なので、両方とも正しい表現です。◇¬Dは「デッドロックしない可能性がある」に過ぎず、仕様としては弱すぎます。"
  },
  {
    "id": "ch18-p2",
    "type": "multiple-choice",
    "question": "3つの世界W = {w₀, w₁, w₂}があり、到達可能性は w₀Rw₁, w₀Rw₂, w₁Rw₂ のみ。V(P, w₁) = 真, V(P, w₂) = 真。世界w₀における□Pの真偽は？",
    "options": [
      "真。w₀から到達可能なw₁とw₂の両方でPが真だから",
      "偽。w₀自身でPの真偽が定められていないから",
      "偽。w₁からw₂への関係があるから",
      "決定不能。情報が不足している"
    ],
    "correctIndex": 0,
    "explanation": "□Pの評価は「wから到達可能なすべての世界でPが真か」です。w₀から到達可能なのはw₁とw₂で、両方でP=真なので□Pはw₀で真です。w₀自身でのPの真偽や、w₁からの関係は□Pのw₀での評価に影響しません。"
  },
  {
    "id": "ch18-p3",
    "type": "multiple-choice",
    "question": "到達可能性関係Rが反射的でない場合、公理T（□P → P）は成り立ちません。これが問題になる実例はどれですか？",
    "options": [
      "信念の論理: 「自分はPを信じている」からといって「Pが実際に真」とは限らない",
      "数学の証明: 証明された定理は必ず真である",
      "物理法則: 物理法則は現実世界でも成り立つ",
      "論理的真理: トートロジーはすべての世界で真"
    ],
    "correctIndex": 0,
    "explanation": "信念の様相論理（doxastic logic）では、□P→Pは成立しません。人は偽の命題を信じることができるからです。この場合、到達可能性関係は反射的ではなく、「自分が信じている世界」に現実世界が含まれない可能性があります。"
  },
  {
    "id": "ch18-p4",
    "type": "counterexample",
    "argument": "□P → Pは常に成り立つ。なぜなら、必然的に真であるものは当然真だからだ。",
    "premises": ["□P → Pは常に成り立つ"],
    "conclusion": "すべての様相論理で□P → Pは妥当である",
    "vulnerablePremiseIndex": 0,
    "counterexamples": [
      { "id": "c1", "text": "信念の論理では、信じていること（□P）が真（P）とは限らない。到達可能性関係が反射的でないモデルが反例。", "isValid": true },
      { "id": "c2", "text": "数学の定理は必然的かつ実際に真なので反例にならない", "isValid": false },
      { "id": "c3", "text": "◇Pが成り立てば□Pも成り立つので反例にならない", "isValid": false },
      { "id": "c4", "text": "公理系K（最小の正規様相論理）では□P→Pは定理ではない。Rに反射性の制約がないモデルで反例が構成できる。", "isValid": true }
    ],
    "explanation": "□P → Pは公理T（体系T以上）の公理であり、Rが反射的なモデルでのみ成立します。公理系Kでは□P→Pは証明できず、信念や義務の論理ではむしろ成り立たないほうが適切です。"
  },
  {
    "id": "ch18-p5",
    "type": "counterexample",
    "argument": "◇P → □◇Pは直感的に正しい。可能なことが「可能であること」はどの状況でも変わらないはずだ。",
    "premises": ["何かが可能であるなら、それが可能であることはどの状況から見ても成り立つ"],
    "conclusion": "◇P → □◇P はすべての様相論理で妥当",
    "vulnerablePremiseIndex": 0,
    "counterexamples": [
      { "id": "c1", "text": "S4では到達可能性が推移的だが対称的でないので、w₀から見てw₁でPが真でも、w₁から到達可能な世界ではPが偽の可能性がある。◇P→□◇Pは一般には成立しない。", "isValid": true },
      { "id": "c2", "text": "S5では到達可能性が同値関係なので◇P→□◇Pは常に成り立つ", "isValid": false },
      { "id": "c3", "text": "◇Pが成り立つなら□Pも成り立つので反例はない", "isValid": false }
    ],
    "explanation": "◇P → □◇P は公理系S5（到達可能性が同値関係）の公理であり、S4以下では一般に成り立ちません。可能性の「安定性」は到達可能性関係の対称性に依存します。"
  }
]
