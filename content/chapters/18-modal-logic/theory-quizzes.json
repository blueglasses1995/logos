[
  {
    "id": "ch18-t1",
    "type": "multiple-choice",
    "question": "「明日雨が降るかもしれない」を様相論理の記号で正しく表現したものはどれですか？",
    "options": [
      "◇P（Pは「明日雨が降る」）",
      "□P（Pは「明日雨が降る」）",
      "¬□P（Pは「明日雨が降る」）",
      "□¬P（Pは「明日雨が降る」）"
    ],
    "correctIndex": 0,
    "explanation": "「かもしれない」は可能性を表す表現なので、◇（ダイヤモンド）で表します。□Pは「必ず雨が降る」、□¬Pは「絶対に雨が降らない」を意味します。"
  },
  {
    "id": "ch18-t2",
    "type": "multiple-choice",
    "question": "クリプキモデル M = (W, R, V) において、M, w ⊨ □P が成り立つ条件は？",
    "options": [
      "wから到達可能なすべての世界w'でPが真",
      "wから到達可能なある世界w'でPが真",
      "すべての世界でPが真",
      "世界wでPが真"
    ],
    "correctIndex": 0,
    "explanation": "□P（必然的にP）は、現在の世界wから到達可能な「すべての」世界でPが真であることを要求します。「ある」世界でPが真であればよいのは◇P（可能的にP）です。"
  },
  {
    "id": "ch18-t3",
    "type": "multiple-choice",
    "question": "□P ⟺ ¬◇¬P という等式の正しい直感的解釈はどれですか？",
    "options": [
      "「Pが必然的に真」は「Pが偽である可能性がない」と同じ",
      "「Pが必然的に真」は「Pが偽でない可能性がある」と同じ",
      "「Pが必然的に真」は「Pが真である可能性がない」と同じ",
      "「Pが必然的に真」は「Pの否定が必然的」と同じ"
    ],
    "correctIndex": 0,
    "explanation": "□P（必ずP）と¬◇¬P（Pが偽である可能性がない）は論理的に同値です。これは述語論理の∀xP(x) ⟺ ¬∃x¬P(x)と同じ構造です。"
  },
  {
    "id": "ch18-t4",
    "type": "multiple-choice",
    "question": "様相論理の公理系S4が要求する到達可能性関係Rの性質は？",
    "options": [
      "反射的かつ推移的",
      "反射的のみ",
      "推移的のみ",
      "反射的、推移的、対称的（同値関係）"
    ],
    "correctIndex": 0,
    "explanation": "S4は公理T（□P→P、反射性に対応）と公理4（□P→□□P、推移性に対応）を持ちます。対称性も加えるとS5になります。"
  },
  {
    "id": "ch18-t5",
    "type": "proof-builder",
    "conclusion": "◇Q",
    "availablePremises": [
      { "id": "p1", "label": "□(P → Q)", "rule": "前提" },
      { "id": "p2", "label": "◇P", "rule": "前提" },
      { "id": "p3", "label": "公理K: □(P→Q)→(□P→□Q) を◇版に変換", "rule": "推論規則" }
    ],
    "correctOrder": ["p2", "p1", "p3"],
    "explanation": "□(P→Q)と◇Pから◇Qを導けます。直感的には「PならばQが必然的に成り立ち、Pが可能なら、Qも可能である」ということです。公理Kの◇版として知られる定理です。"
  }
]
