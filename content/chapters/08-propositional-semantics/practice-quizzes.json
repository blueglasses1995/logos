[
  {
    "id": "ch8-p1",
    "type": "multiple-choice",
    "question": "ソフトウェアの型システムにおいて、型チェッカーが「型が正しい」と判定したプログラムが実行時に型エラーを起こさないことを保証する性質は、論理学のどの概念に対応しますか？",
    "options": [
      "健全性（型が正しいと判定されたなら、実際に型エラーは起きない）",
      "完全性（型エラーが起きないなら、型が正しいと判定される）",
      "決定可能性（型チェックが必ず終了する）",
      "充足可能性（正しい型付けが存在する）"
    ],
    "correctIndex": 0,
    "explanation": "型システムの健全性（Type Soundness）は、論理学の健全性と同じ構造です。「型チェッカーが通す ⟹ 実際に安全」は「⊢ ⟹ ⊨」に対応します。健全でない型システムは、型チェックを通過しても実行時エラーが発生する可能性があります。"
  },
  {
    "id": "ch8-p2",
    "type": "multiple-choice",
    "question": "テストスイートが「すべてのテストが通れば、プログラムにバグはない」ことを保証できないのは、論理学のどの性質が欠けているためですか？",
    "options": [
      "完全性（テストでカバーされていないケースがある = 正しいのに検証されていない部分がある）",
      "健全性（テストが通ることが正しさを保証しない）",
      "決定可能性（テストが終了しない可能性がある）",
      "充足可能性（テストケースを作成できない）"
    ],
    "correctIndex": 0,
    "explanation": "テストスイートには通常「完全性」が欠けています。テストでカバーしていないパスやエッジケースが存在するため、「バグがない ⟹ テストが通る」は成り立っても「テストが通る ⟹ バグがない」は一般には成り立ちません。ただしテストの健全性（テストが通る ⟹ テストした範囲は正しい）は通常保たれます。"
  },
  {
    "id": "ch8-p3",
    "type": "multiple-choice",
    "question": "次のうち、充足可能だが恒真式ではない論理式はどれですか？",
    "options": [
      "P ∧ Q",
      "P ∨ ¬P",
      "P ∧ ¬P",
      "(P → Q) ∨ (Q → P)"
    ],
    "correctIndex": 0,
    "explanation": "P ∧ Q は P = T, Q = T のとき真になるため充足可能ですが、P = T, Q = F のとき偽になるため恒真式ではありません。P ∨ ¬P と (P → Q) ∨ (Q → P) は恒真式であり、P ∧ ¬P は矛盾式（充足不可能）です。"
  },
  {
    "id": "ch8-p4",
    "type": "counterexample",
    "argument": "すべてのトートロジーは証明可能であり、これはあらゆる論理体系に成り立つ",
    "premises": ["命題論理の完全性定理が成り立つ"],
    "conclusion": "どんな論理体系でも、正しいことはすべて証明できる",
    "vulnerablePremiseIndex": 0,
    "counterexamples": [
      { "id": "c1", "text": "ゲーデルの不完全性定理により、算術を含む体系では真だが証明できない命題が存在する", "isValid": true },
      { "id": "c2", "text": "命題論理は簡単すぎるので完全性は自明", "isValid": false },
      { "id": "c3", "text": "述語論理でも完全性は成り立つが決定可能性は失われる", "isValid": true },
      { "id": "c4", "text": "コンピュータは十分に高速なので全てを証明できる", "isValid": false }
    ],
    "explanation": "命題論理の完全性定理は命題論理に限定された結果です。ゲーデルの不完全性定理により、自然数の算術を含む十分に強力な体系では完全性が成り立ちません。また、述語論理では完全性は保たれるものの決定可能性が失われます。論理体系の性質は、その表現力によって異なります。"
  },
  {
    "id": "ch8-p5",
    "type": "counterexample",
    "argument": "命題論理は決定可能なので、任意の命題論理の式を効率的に判定できる",
    "premises": ["命題論理は真理値表で決定可能である"],
    "conclusion": "命題論理の充足可能性は常に効率的に判定できる",
    "vulnerablePremiseIndex": 0,
    "counterexamples": [
      { "id": "c1", "text": "SAT問題はNP完全であり、変数が増えると真理値表は指数的に増大するため、効率的な判定は保証されない", "isValid": true },
      { "id": "c2", "text": "コンピュータの性能向上で将来的には解決される", "isValid": false },
      { "id": "c3", "text": "P ≠ NP が正しければ、多項式時間アルゴリズムは存在しない", "isValid": true },
      { "id": "c4", "text": "命題論理は単純なので常に高速に判定できる", "isValid": false }
    ],
    "explanation": "「決定可能」は「アルゴリズムが存在する」ことを意味しますが、「効率的」を保証するものではありません。命題論理の充足可能性判定（SAT問題）はNP完全問題であり、最悪の場合は指数的な計算時間が必要です。決定可能性と計算効率は異なる概念です。"
  }
]
