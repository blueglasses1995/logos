[
  {
    "id": "ch4-p1",
    "type": "multiple-choice",
    "question": "法律文書に「すべての従業員は秘密保持契約に署名しなければならない」と書かれています。ある従業員が署名していません。この状況を正しく表すのはどれですか？",
    "options": [
      "規定の否定が成立: ¬∀x (E(x) → S(x))、つまり ∃x (E(x) ∧ ¬S(x)) で違反状態",
      "規定は満たされている: 一人くらいは例外があってよい",
      "この規定は述語論理では表現できない",
      "規定と現実は矛盾しない: 全称命題は例外を許容する"
    ],
    "correctIndex": 0,
    "explanation": "∀x (E(x) → S(x))「すべての従業員は署名済み」の否定は ∃x (E(x) ∧ ¬S(x))「署名していない従業員が存在する」です。これは明確な違反です。"
  },
  {
    "id": "ch4-p2",
    "type": "multiple-choice",
    "question": "SQLで「すべての注文が出荷済みであることを確認する」クエリはどれが適切ですか？",
    "options": [
      "NOT EXISTS (SELECT 1 FROM orders WHERE shipped = false)",
      "EXISTS (SELECT 1 FROM orders WHERE shipped = true)",
      "SELECT COUNT(*) FROM orders WHERE shipped = true",
      "SELECT * FROM orders WHERE shipped = true"
    ],
    "correctIndex": 0,
    "explanation": "∀x P(x)をSQLで表す標準的な方法は NOT EXISTS (...WHERE NOT P)、つまり「Pでないものが存在しない」です。EXISTSで真のものを見つけるだけでは、すべてが真であることは確認できません。"
  },
  {
    "id": "ch4-p3",
    "type": "multiple-choice",
    "question": "要件定義書に「ユーザーは少なくとも1つのロールを持つ」と書かれています。この要件を論理式で表すと？ ただし U(x)=「xはユーザー」、R(x,y)=「xはロールyを持つ」",
    "options": [
      "∀x (U(x) → ∃y R(x, y))",
      "∃x (U(x) ∧ ∃y R(x, y))",
      "∀x ∀y (U(x) → R(x, y))",
      "∃y ∀x (U(x) → R(x, y))"
    ],
    "correctIndex": 0,
    "explanation": "「すべてのユーザーについて、そのユーザーが持つロールが少なくとも1つ存在する」＝ ∀x (U(x) → ∃y R(x, y))。各ユーザーごとに異なるロールでよいので、∃yは∀xの内側です。"
  },
  {
    "id": "ch4-p4",
    "type": "multiple-choice",
    "question": "テスト仕様書で「すべてのエンドポイントにテストがある」ことを確認したい。実際には2つのエンドポイントにテストがないことがわかりました。この状況を量化子の否定で表すと？",
    "options": [
      "¬∀x (Endpoint(x) → HasTest(x)) が成立。つまり ∃x (Endpoint(x) ∧ ¬HasTest(x))",
      "∀x (Endpoint(x) → ¬HasTest(x)) が成立",
      "¬∃x (Endpoint(x) ∧ HasTest(x)) が成立",
      "∃x HasTest(x) が成立"
    ],
    "correctIndex": 0,
    "explanation": "「すべてのエンドポイントにテストがある」の否定 = 「テストがないエンドポイントが存在する」。¬∀x (E(x) → T(x)) ≡ ∃x (E(x) ∧ ¬T(x)) です。"
  }
]
